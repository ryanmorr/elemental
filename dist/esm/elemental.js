/*! @ryanmorr/elemental v0.1.0 | https://github.com/ryanmorr/elemental */
const t={},e=/\.?([A-Z]+)/g,n=/-([a-z])/g,r=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/;function s(t){return function(t){if(!t||"object"!=typeof t)return!1;const e=Object.getPrototypeOf(t);return null===e||e===Object.getPrototypeOf({})}(t)?Object.assign({},t):Array.isArray(t)?t.slice():t}function i(n){return n in t?t[n]:t[n]=n.replace(e,((t,e)=>"-"+e.toLowerCase()))}function o(t,e){t&&t.slice().forEach(e)}function c(t){if(""===t)return!0;if(t===+t+"")return+t;if(r.test(t))try{return JSON.parse(t)}catch(t){}return t}function u(t,e){if(Array.isArray(e))e.forEach((e=>u(t,e)));else{if(e.nodeName&&(e=e.sheet||e.textContent),"string"==typeof e){const t=new CSSStyleSheet;t.replaceSync(e),e=t}t.adoptedStyleSheets.push(e)}}function a(e,r){return class extends HTMLElement{static get observedAttributes(){return function(t){return Object.keys(t).filter((e=>{const n=t[e],r=typeof n;return"string"===r||"number"===r||"boolean"===r||null===n})).map(i)}(e)}constructor(){super(),this._initialized=!1,this._observers={mount:[],unmount:[],prop:[],attr:[]}}get html(){return this.shadowRoot}set html(t){this.shadowRoot.replaceChildren(),"string"==typeof t?this.shadowRoot.innerHTML=t:this.shadowRoot.appendChild(t)}set css(t){this.shadowRoot&&u(this.shadowRoot,t)}observe(t,e){if(t.includes(":")){const n=t.split(":");t=n[0],e=function(t,e){return(n,r,s)=>{n===t&&e(r,s)}}(n[1],e)}const n=this._observers[t];if(n)return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}connectedCallback(){if(!this._initialized){!function(t,e){Object.keys(e).forEach((n=>{let r=s(e[n]);const u=i(n),a=t.getAttribute(u);if(null!=a)r=c(a);else{const e=typeof r;"string"!==e&&"number"!==e&&!0!==r||t.setAttribute(u,!0===r?"":r)}Object.defineProperty(t,n,{get:()=>r,set(e){const s=r;r=e,s!==e&&o(t._observers.prop,(t=>t(n,e,s)))},enumerable:!0,configurable:!0})}))}(this,e),this._initialized=!0;const t=this.attachShadow({mode:"open"}),n=r.call(this,this);n&&("string"==typeof n?t.innerHTML=n:t.appendChild(n))}const t=this.parentElement;o(this._observers.mount,(e=>e(t)))}disconnectedCallback(){o(this._observers.unmount,(t=>t()))}attributeChangedCallback(e,r,s){if(!this._initialized)return;if(r===s)return;const i=function(e){return e in t?t[e]:t[e]=e.replace(n,((t,e)=>e.toUpperCase()))}(e);this[i]=c(s),o(this._observers.attr,(t=>t(e,s,r)))}}}function l(t,e,n){"function"==typeof e&&(n=e,e={});const r=a(e,n);return customElements.define(t,r),r}export{l as default};
